{% extends "mysite/wrapper.html" %}

{% block title %} Новости {% endblock %}
{% load staticfiles %}
{% block body %}
    {% for post in object_list %}
        <div class="news">
        <a href="/news/{{ post.id }}"><h3>{{ post.title }}</h3></a>
            <p class="post">{{ post.post }}</p>
        <h5>{{ post.date|date:"d-m-Y" }}</h5>
        </div>
    {% endfor %}
    <script type="text/javascript">
    function title() {
    var elem, size, text;
    var elem = document.getElementsByClassName('post');
    var text = elem.innerHTML;
    var size = 255;
    var n = 250;
    for(var i = 0; i < elem.length; i++) {
    if(elem[i].innerHTML.length > size) {
    text = elem[i].innerHTML.substr(0,n);
    }
    else {
    text = elem[i].innerHTML;
    }
    elem[i].innerHTML = text + '...';
    }
    }
    title();
    </script>
{% endblock %}